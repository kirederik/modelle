<%= form_tag "transactions/report", :class => "form-search", :method => :get do %>
    <legend>Procure o cliente pelo nome</legend>
    <%= autocomplete_field_tag 'customer', '', autocomplete_customer_name_customers_path, :update_elements => {:id => '#customer_id' }, :class => "input-xlarge search-query", :placeholder => "Nome do cliente" %>
    <%= hidden_field_tag "customer_id" %>
     <%= label_tag(:type, "Tipo:") %>
     <%= select_tag(:type, options_for_select([['Todas', 0], ['Acerto', 1], ['Devolução', 2]], 0), :class => "input-small" ) %>
     <%= label_tag(:type, "Inicio:") %>
    <%= text_field_tag :startdate, nil, :class => "input-small" %>
     <%= label_tag(:type, "Fim:") %>
    <%= text_field_tag :enddate, nil, :class => "input-small"  %>

    <%= submit_tag 'Filtrar', :class => "btn btn-primary"%>
<% end %>


<h2>Lista das Últimas Transações</h2>

<table class="table table-hover">
    <thead>
        <tr>
          <th>Cliente</th>
          <th>Produto</th>
          <th>Quantidade</th>
          <th>Valor obtido</th>
          <th>Tipo de Transação</th>
          <th>Data</th>
          <th></th>
          <th></th>
          <th></th>
        </tr>
    </thead>
    <tbody>
        <% @transactions.each do |transaction| %>
              <tr>
                <td><%= transaction.customer_stock.customer.name %></td>
                <td><%= transaction.customer_stock.product.name %></td>
                <td><%= transaction.quantity %></td>
                <td><%= transaction.value %></td>
                <td>
                    <% if transaction.is_devolution %>
                        <p>Devolução</p>
                    <% else %>
                        <p>Acerto</p> 
                    <% end %>
                </td>
                <td><%= transaction.created_at %></td>
                <td><%= link_to 'Show', transaction %></td>
                <td><%= link_to 'Edit', edit_transaction_path(transaction) %></td>
                <td><%= link_to 'Destroy', transaction, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </tr>
        <% end %>
    </tbody>
</table>

<br />

